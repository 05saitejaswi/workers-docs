name = "Cache TTL"
description = "Determine how/if Cloudflare and Browsers will cache a resource by setting TTL and cache settings"
code = """async function handleRequest(request) {
  let response = await fetch(request, {
    cf: {
      // Tell Cloudflare to always cache this fetch regardless of content type
      // for a max of 5 seconds before revalidating the resource
      cacheTtl: 5, // sets TTL to 5 and cacheEverything setting
    },
  })
  return new Response(response, {
    headers: {
      //Set cache control headers to cache on browser for 10 seconds
      'cache-control': 'public, max-age=10',
    },
  })
}
addEventListener('fetch', event => {
  return event.respondWith(handleRequest(event.request))
})
"""